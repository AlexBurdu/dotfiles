{
  "_description": "Tmux session lifecycle hooks (status indicator + workdir tracking)",
  "hooks": {
    "SessionStart": [
      {
        "matcher": "startup",
        "hooks": [
          {
            "name": "tmux-status-working",
            "type": "command",
            "command": "$HOME/.config/tmux/hooks/tmux-status-hook.sh working; printf '{\"decision\":\"allow\"}'"
          }
        ]
      }
    ],
    "BeforeAgent": [
      {
        "matcher": "*",
        "hooks": [
          {
            "name": "tmux-status-working",
            "type": "command",
            "command": "$HOME/.config/tmux/hooks/tmux-status-hook.sh working; printf '{\"decision\":\"allow\"}'"
          }
        ]
      }
    ],
    "AfterAgent": [
      {
        "matcher": "*",
        "hooks": [
          {
            "name": "tmux-status-waiting",
            "type": "command",
            "command": "$HOME/.config/tmux/hooks/tmux-status-hook.sh waiting; printf '{\"decision\":\"allow\"}'"
          }
        ]
      }
    ],
    "AfterTool": [
      {
        "matcher": "write_file|edit_file",
        "hooks": [
          {
            "type": "command",
            "command": "jq -r '.tool_input.file_path // empty' | xargs -I{} sh -c 'tmux set-option -p @pilot-workdir \"$(dirname \"{}\")\" 2>/dev/null; true'"
          }
        ]
      }
    ],
    "SessionEnd": [
      {
        "matcher": "exit",
        "hooks": [
          {
            "name": "tmux-status-ready",
            "type": "command",
            "command": "$HOME/.config/tmux/hooks/tmux-status-hook.sh ready; printf '{\"decision\":\"allow\"}'"
          }
        ]
      }
    ]
  }
}
